## 效果展示

<body onload="useVue({created:function(){
  $.ajax('https://api.apiopen.top/getWangYiNews')
   .then(data=>{
     if(data.code===200){
       alert(1);
       console.log(markdownVue);
       window.markdownVue.markdownData = data.result;
     }
   })
}})"></body>
<div id="markdown-vue">
  <el-alert title="以下新闻内容每天会自动更新" type=success>
    <el-link href="#flag">点我快速跳到 $如何实现</el-link>
  </el-alert>
  <div style="height: 10px;"></div>
  <el-row :gutter="10">
    <el-col :span="isMobile?24:8" v-for="(item,i) in markdownData" :key="i">
      <el-card shadow="hover" style="margin-bottom:10px;width: 100%;position: relative;">
        <el-link :underline="false" :href="item.path" style="width: 100%;">
          <el-image :src="item.image" fit="fill" style="width:100%;height:175px;"></el-image>
          <div style="margin: 8px auto;font-weight: bold;font-size: 0.9rem;" v-cloak>{{item.title}}</div>
          <span style="font-size: small;float: right;position: relative;bottom: 1px;">{{item.passtime}}</span>
        </el-link>
      </el-card>
    </el-col>
  </el-row>
  <div style="height: 10px;"></div>
</div>

## 如何实现 <span id="flag"></span>

问题：

- 如何使博客园支持 Vue 和 ElementUI
- 如何实现在 Markdown 中发送 Ajax？这也是至关重要的一点。
- 如何实现响应式？

解决：

- 由于博客园默认会预处理掉 Markdown 的`<script>`标签。也就是说我们只能把 Js 写在 Html 的事件函数中。
- 因此，我们要在页脚 html 导入依赖、初始化 Vue、定义钩子函数（如 ajax）；在 Mardown 书写 template、传入回调函数

Markdown 代码：

```html
## 效果展示

<div id="markdownVue">
  <body onload="markdownAjax('https://api.apiopen.top/getWangYiNews')">
  </body>

  <el-link href="#flag">点我跳到如何实现</el-button>

  <div style="height: 10px;"></div>

  <div v-if="markdownData['code']===200">
  <el-row :gutter="10">
    <el-col :span="isMobile?24:8" v-for="(item,i) in markdownData['result']" :key="i">
      <el-card shadow="hover" style="margin-bottom:10px;width: 100%;position: relative;">
        <el-link :underline="false" :href="item.path" style="width: 100%;">
          <el-image :src="item.image" fit="fill" style="width:100%;height:175px;"></el-image>
          <div style="margin: 8px auto;font-weight: bold;font-size: 0.9rem;" v-cloak>{{item.title}}</div>
          <span style="font-size: small;float: right;position: relative;bottom: 1px;" v-text="item.passtime"></span>
        </el-link>
      </el-card>
    </el-col>
  </el-row>
  </div>
  <div style="height: 10px;"></div>
</div>

## 如何实现 <span id="flag"></span>
```

<el-alert effect="dark" title="注意在markdown的代码区域不要使用{{}}语法，改用v-text代替，否则html会失效" type="warning"></el-alert>

页脚 HTML 代码：

```html
<!--********************************************* 复制下面内容到cnblog的页脚处 ***********************************************-->
<!-- my-blog-static 需要cnblog文件上传 -->
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/element-ui/2.13.2/index.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/mdui/1.0.0/js/mdui.min.js"></script>
<script src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.js"></script>
<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/unslider/2.0.3/js/unslider-min.js"></script>
<script src="https://cdn.bootcss.com/clipboard.js/2.0.4/clipboard.min.js"></script>
<script src="https://blog-static.cnblogs.com/files/oceans/sidebar.js"></script>
<script src="https://blog-static.cnblogs.com/files/oceans/scrollbar.js"></script>
<script src="https://blog-static.cnblogs.com/files/oceans/owo.js"></script>
<script src="https://blog-static.cnblogs.com/files/oceans/51La.js"></script>
<div id="oceans-footer"></div>
<script>
  // 防止七牛云缓存
  $('#oceans-footer').load('https://oceans.100jiancai.cn/main.html?t=' + new Date().getTime())

  // 全局回调函数，有效解决cnblog不支持markdown里面写JS的问题
  function markdownCallback(cb) {
    cb()
  }

  // 获取后端数据
  function markdownAjax(url, method = 'get', data) {
    $.ajax({
      url: url,
      method: method,
      data: data,
      success: function (data) {
        console.log('debug: ', data)
        new Vue({
          el: '#cnblogs_post_body',
          data: function () {
            return {
              msg: 'Hello world!', // 没有任何实际作用
              isMobile: false,
              markdownData: data,
            }
          },
          mounted() {
            this.isMobile = __isMobile()
          },
        })
      },
    })
  }

  // 私有函数
  function __isMobile() {
    var userAgentInfo = navigator.userAgent
    var Agents = ['Android', 'iPhone', 'SymbianOS', 'Windows Phone', 'iPad', 'iPod']
    var flag = true
    for (var v = 0; v < Agents.length; v++) {
      if (userAgentInfo.indexOf(Agents[v]) > 0) {
        flag = false
        break
      }
    }
    return !flag
  }
</script>
```
